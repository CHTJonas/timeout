---
- name: Basic Setup
  hosts: all
  vars_files:
    - vars.yml
  roles:
    - base

- name: Monitored host
  hosts: all
  vars:
    _node_exporter_binary_install_dir: '/opt/node_exporter'
    _node_exporter_system_group: 'prometheus'
    _node_exporter_system_user: 'prometheus'
  roles:
    - cloudalchemy.node-exporter

- name: DNS Server
  hosts: dns
  vars:
    coredns_config_file: files/coredns/Corefile.j2
  roles:
    - cloudalchemy.coredns

- name: BigBlueButton
  hosts: bbb
  vars:
    bbb_letsencrypt_enable: yes
    bbb_letsencrypt_email: admin@ulmlernt.de
    bbb_coturn_enable: no
    bbb_turn_enable: no
    bbb_greenlight_enable: no
    bbb_api_demos_enable: no
  roles:
    - nginx
    - n0emis.bigbluebutton
    - bbb-ulmlernt
